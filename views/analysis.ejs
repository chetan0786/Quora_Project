<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
  <script data-ad-client="ca-pub-3837007972032379" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <title>Storybooks</title>
</head>
<body>
	
	<%- include('partials/header'); -%>

       
             <div class="row " style="">
            <div class="col s0 m2"></div>
  <div class="col s12 m8">
    <div class="card ">
      <div class="card-content center" style="padding : 5px;">
      
      <h4>Your analysis</h4>
    
  </div>
   </div>
            </div>
            <div class="col s0 m2  ">
            </div>
</div>
           

    
    
    
       <div class="row " style="">
            <div class="col s0 m2"></div>
            <div class="col s12 m8">
                <div class="card ">
                    <div class="card-content " style="padding : 5px;">
                        
                            <div class="row">
                             <div class="col s12 m12">
                                 
                                 
                                 
                                 
                                 
                                 
                                  <table class="striped" >
    <thead>
      <tr>
        <th>Title</th>
        <th>Date</th>
        <th>Comments</th>
        <th>Likes</th>
      </tr>
    </thead>
    <tbody>
      <%stories.forEach(function(element){%>
        <tr>
            <%
formatDate= function(date, format){
    return moment(date).format(format);
  }
%>

          
          <td><a href="/stories/show/<%= element._id %>"><%= element.title %></a></td>
          <td><%= formatDate(element.date ,'MMMM Do YYYY') %></td>
          <td><span class="dash-status"><%= element.comments.length %></span></td>
          <td><%= element.likedBy.length%></td>
           
        </tr>
        
          
       
        
        
     <%});%>
    </tbody>
  </table>
                                </div>
                                 
                                </div>
                            
                          
                        
                        <div class="row">
                            <div class="col s12 m6">
                        <div id="piechart2"></div>
                                </div>
                        </div>
                        
                           
                          <div class="row">
                            <div class="col s12 m6">
                        <div id="piechart"></div>
                                </div>
                            
                            </div>
                        
                        
                    </div>
                </div>
            </div>
            <div class="col s0 m2  ">
            </div>
       </div>
           

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">

google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);


function drawChart() {
    
     
  var data = google.visualization.arrayToDataTable([
  ['Task', 'Likes'],
      
<%stories.forEach(function(element){%>
  ['<%= element.title%>', <%= element.likedBy.length%>],
  <%});%>
]);

    
      var data2 = google.visualization.arrayToDataTable([
  ['Task', 'Comments'],
      
<%stories.forEach(function(element){%>
  ['<%= element.title%>', <%= element.comments.length%>],
  <%});%>
]);
    
    
    
  var options = {'title':'Stories like ❤️ analysis','width':300};
var options2 = {'title':'Stories Comment analysis','width':300};
  
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
    var chart2 = new google.visualization.BarChart(document.getElementById('piechart2'));
  chart.draw(data, options);
    chart2.draw(data2, options2);
}
</script>

   
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
	<%- include('partials/footerForStories'); -%>


</body>

	 <script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <script>
    $(document).ready(() => {
      $('.button-collapse').sideNav();
    });
  </script>



